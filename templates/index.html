<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>News Collection Demo</title>
    <style>
        .news-item { margin-bottom: 1em; border-bottom: 1px solid #ccc; padding-bottom: 1em; }
        .news-title { cursor: pointer; color: #0074d9; }
        .news-details { display: none; margin-top: 0.5em; }
        .ticker-list { max-height: 300px; overflow-y: auto; border: 1px solid #ccc; padding: 8px; margin-bottom: 1em; }
        .ticker-checkbox { margin-right: 8px; }
        .ticker-label { margin-right: 16px; display: inline-block; min-width: 120px; }
    </style>
</head>
<body>
    <h1>News Collection Demo</h1>
    <div id="ticker-section">
        <b>Seleziona i titoli di interesse:</b>
        <div id="ticker-list" class="ticker-list"></div>
    </div>
    <button onclick="updateSelectedTickers()">Aggiorna selezione</button>
    <div id="selected-tickers"></div>
    <div id="results"></div>
    <script>
        let allTickers = [];
        let selectedTickers = [];

        // Carica la lista dei ticker da static/tickers.json
        fetch('/static/tickers.json')
            .then(res => res.json())
            .then(data => {
                allTickers = data;
                renderTickerCheckboxes();
            });

        function renderTickerCheckboxes() {
            const listDiv = document.getElementById('ticker-list');
            listDiv.innerHTML = allTickers.map(t =>
                `<label class='ticker-label'><input type='checkbox' class='ticker-checkbox' value='${t.symbol}'>${t.symbol} - ${t.name}</label>`
            ).join('<br>');
        }

        function updateSelectedTickers() {
            const checkboxes = document.querySelectorAll('.ticker-checkbox:checked');
            selectedTickers = Array.from(checkboxes).map(cb => cb.value);
            document.getElementById('selected-tickers').innerHTML =
                selectedTickers.length ?
                `<b>Selezionati:</b> ${selectedTickers.join(', ')}` :
                '<i>Nessun titolo selezionato</i>';
        }
    </script>
</body>
</html> 